{% extends 'layout.html.twig' %}

{% block stylesheets %}

    {{ parent() }}

    <!-- Geolocation CSS -->
    <link rel="stylesheet" href="{{ asset('css/leaflet.css') }}">

{% endblock stylesheets %}

{% block nav %}

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top container-fluid" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll container-fluid">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="page-scroll" href="https://wildcodeschool.fr" target="_blank">
                    <img class="navbar-brand page-scroll" src="{{ asset('images/logoOrangeBlanc.png') }}"
                         alt="La Wild"/>
                </a>
                <a class="navbar-brand page-scroll" href="#page-top">Wildbook</a>
            </div>

            <!-- Nav links for toggling to the sections -->
            <div class="collapse navbar-collapse navbar-ex1-collapse container-fluid">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a class="page-scroll" href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#network"><i class="fa fa-map-marker" aria-hidden="true"></i> Notre
                            réseau</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#wilders"><i class="fa fa-search" aria-hidden="true"></i> Les
                            Wilders</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#projects"><i class="fa fa-search" aria-hidden="true"></i> Les
                            réalisations</a>
                    </li>
                </ul>
            </div>

        </div>

    </nav>

{% endblock nav %}

{% block container %}

    <!-- Section 'Le Wildbook' -->
    <section id="wildbook" class="intro-section row">

        <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
            <h2 class="paragraphTitle">Le Wildbook</h2>
            <p class="paragraphText">
                Depuis 2014, un peu plus de 400 Wilders ont été formés sur l’ensemble de nos campus.
                Le Wild Book se veut un outil pour savoir qui ils sont et découvrir ce sur quoi
                ils ont pu travailler dans le cadre de leurs formations.
            </p>
        </div>

    </section>

    <!-- Buttons Wilders/Projects pages -->
    <div class="navigation row hidden-xs">
        <div class="col-md-2">
            <a href="{{ path('search_wilder') }}">
                <div class="navigationButton shadow">
                    <i class="fa fa-search" aria-hidden="true"></i> WILDERS
                </div>
            </a>
        </div>

        <div class="col-md-2">
            <a href="{{ path('search_realisation') }}">
                <div class="navigationButton shadow">
                    <i class="fa fa-search" aria-hidden="true"></i> RÉALISATIONS
                </div>
            </a>
        </div>
    </div>

    <!-- Separator line -->
    <hr class="separatorLine ">

    <!-- Section 'Notre réseau de Wilders' -->
    <section id="network" class="intro-section row">

        <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
            <h2 class="paragraphTitle">Notre réseau de Wilders</h2>
            <p class="paragraphText">
                Avec notre réseau de 9 écoles (Lille, Strasbourg, Paris, Fontainebleau, La Loupe, Orléans,
                Bordeaux, Toulouse & Lyon), les Wilders sont partout en France.
                Vous avez donc la possibilité de faire des recherches par ville
                pour trouver le collaborateur donc vous avez besoin.
            </p>
        </div>

        <!-- API geolocation -->
        <div class="row">
            <div id="mapid" class="hidden-xs col-md-offset-3 col-md-6"></div>
        </div>

    </section>

    <!-- Separator line -->
    <hr class="separatorLine">

    <!-- Section 'Les Wilders' -->
    <section id="wilders" class="intro-section row">

        <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
            <h2 class="paragraphTitle">Les Wilders</h2>
            <p class="paragraphText">
                La partie “Wilders” propose des pages profils pour l’ensemble des élèves inscrits
                avec un certain nombre d’informations sur les compétences de chacun dont leur disponibilité
                pour un contrat de travail ou des missions en freelance.
            </p>
        </div>

        <div class="row">
            <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
                <!-- Wilder star -->
                {{ render(controller('BookBundle:HomeWilder:viewHomeWilder')) }}
            </div>

        </div>

    </section>

    <!-- Separator line -->
    <hr class="separatorLine">

    <!-- Section 'Les réalisations' -->
    <section id="projects" class="row">

        <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
            <h2 class="paragraphTitle">Les réalisations</h2>
            <p class="paragraphText">
                À la Wild Code School la pratique est au coeur de notre idée de l'apprentissage.
                Les élèves sont donc amenés à réaliser des projets de sites web ou d’applications,
                tout au long de leur formation, dont la plupart sont des commandes de vrais clients.
                Pour cela ils travaillent en groupe, se familiarisant avec les méthodes agiles,
                pour se préparer dans les meilleures conditions à leur prochaine vie de développeur web ou mobile.
            </p>
        </div>

    </section>

{% endblock container %}

{% block javascripts %}

    {{ parent() }}

    <!-- Geolocation scripts -->
    <script src="{{ asset('js/leaflet.js') }}"></script>
    <script>
        var mymap = L.map('mapid').setView([47.0833, 2.4], 6);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: '{{ TokenMap }}'
        }).addTo(mymap);
        var wildIcon = L.icon({
            iconUrl: '{{ asset('css/images/logoOrangeBlanc.png') }}',
            iconSize: [30, 30], // size of the icon
            iconAnchor: [22, 20], // point of the icon which will correspond to marker's location
            popupAnchor: [-3, -20] // point from which the popup should open relative to the iconAnchor
        });

        {% for school in schools %}
        var pop = "<b>Wild code school</b><br>{{ school.school }}";
        var marker = L.marker([{{ school.location }}], {icon: wildIcon}).addTo(mymap);
        marker.bindPopup(pop);
        {% endfor %}

        {% for wilder in wilders %}
        {% if wilder.location is not empty %}
        var marker2 = L.marker([{{ wilder.location }}+0.000{{ loop.index0 }}]).addTo(mymap);
        marker2.bindPopup("<img class='geolocationPicture' src=\"{{ asset('uploads/'~ wilder.profilPicture ) }}\"/><p><a href=\"{{ path
        ('profile_wilder', { 'id': wilder.id }) }}\"></p> {{ wilder.lastname }} {{ wilder.firstname }} ");
        {% endif %}
        {% endfor %}

        {% for school in schools %}
        var marker = L.marker([{{ school.location }}], {icon: wildIcon}).addTo(mymap);
        marker.bindPopup("<b>Wild code school</b><br>{{ school.school }}").openPopup();
        {% endfor %}

    </script>

{% endblock javascripts %}